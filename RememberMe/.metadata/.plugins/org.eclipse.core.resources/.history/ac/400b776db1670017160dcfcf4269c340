package servlet;

import java.io.*;

import javax.servlet.RequestDispatcher;
import javax.servlet.ServletException;
import javax.servlet.http.*;

@SuppressWarnings("serial")
public class RememberMeServlet extends HttpServlet {
	public void doGet(HttpServletRequest req, HttpServletResponse resp) throws IOException, ServletException {
		resp.setContentType("text/html");
		PrintWriter out = resp.getWriter();
		Cookie[] ck1 = req.getCookies();
			
			if(ck1 != null) {
				Cookie cookie = null;
				for(int i=0;i<ck1.length;i++)
	        	  {
					cookie = ck1[i];
					if(cookie.getName().equals("JSESSIONID"))
			          {
			        	  
			        	  cookie.setMaxAge(0);
					      cookie.setValue(null);
					      resp.addCookie(cookie);
					        
			          }
			          else
			          {
			        	  out.println("Welcome Back!!!  "+cookie.getValue());
				          RequestDispatcher rd = req.getRequestDispatcher("/profile.html");
					      rd.include(req, resp);
			          }
			          
	        	  }  
			          
			          
			       
			}
			else
			{
				resp.sendRedirect("index.jsp");
			}	
	}
}
