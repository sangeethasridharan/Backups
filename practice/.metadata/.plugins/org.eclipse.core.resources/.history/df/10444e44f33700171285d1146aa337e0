package jsonPrograms;

import java.io.*;
import java.net.*;
//import java.util.*;

import com.fasterxml.jackson.core.*;
//import com.fasterxml.jackson.core.type.TypeReference;
import com.fasterxml.jackson.databind.*;

public class JsonEx1 {

	public static void main(String ar[]) throws Exception
	{
		URL url = new URL("https://randomuser.me/api/?results=1&&inc=gender,name&noinfo");
		HttpURLConnection hu = (HttpURLConnection)url.openConnection();
		BufferedReader br = new BufferedReader(new InputStreamReader(hu.getInputStream()));
		String data;
		StringBuffer data1 = new StringBuffer();
		while((data = br.readLine()) != null)
		{
			data1.append(data);
		}
		
		ObjectMapper obj = new ObjectMapper();
		obj.writeValue(new File("jsonData.json"),data1);
		
		JsonFactory jfactory = new JsonFactory();
		JsonParser jParser = jfactory.createJsonParser(new File("jsonData.json"));
		
		while (jParser.nextToken() != JsonToken.END_OBJECT) {

			String fieldname = jParser.getCurrentName();
			if ("results".equals(fieldname)) {
				jParser.nextToken();
				System.out.println(jParser.getText());
			}
		}
	    //System.out.println(gen.getPgender());
	    //System.out.println(gen.getName());
	    
		
		
		
	}
}
